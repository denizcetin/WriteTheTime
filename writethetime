#!/bin/bash

# Zaman Bilgisini "Saat:Dakika" şeklinde alıp değişkenlere ataması yapılıyor.
tarih=`date +"%T" | awk -F ":" '{print $1":"$2}'`
saat=`echo $tarih | awk -F ":" '{print $1}'`
dakika=`echo $tarih | awk -F ":" '{print $2}'`

# Saat Denemeleri Yapacağında Aşağıdaki İki Yorum Satırını Kaldır ve Saati gir
#saat=00
#dakika=30

# Sistem Saati (Sayıyla) Ekrana Yazdırılıyor.
echo "Sistem Saati => ${saat}:${dakika}"

# Öğlen Akşam İkindi Sabah Gece gibi kavramları hesaplayan fonksiyon
function gunHesapla {
	
	if [ "${saat:0:1}" = "0" ] ; then
		case "${saat:1:1}" in
			0)
				gun="(Gece yarısı)" ;;
			1|2|3|4)
				gun="(Gece)" ;;
			5|6|7|8|9)
				gun="(Sabah)" ;;
		esac
	elif [ "${saat:0:1}" = "1" ] ; then
		case "${saat:1:1}" in
			0|1)
				gun="(Öğleden Önce)"  ;;
			2|3)
				gun="(Öğleyin)"  ;;
			4|5)
				gun="(İkindi)"  ;;
			6|7|8)
				gun="(Akşamüstü)" ;;
			9)
				gun="(Akşam)" ;;
		esac
	else
		gun="(Akşam)"
	fi
	
	echo "$gun"
}

# Saat bişey'i bişey geçiyor larda ki sayılara gelecek ekleri hesaplayan fonksiyon
function geceEkiniHesapla (){
	case "$1" in
		01|05|08|11|13|17|20|23)
			geceEki="'i" ;;
		02|07|12|14|19|00)
			geceEki="'yi" ;;
		06|18)
			geceEki="'yı" ;;
		03|04|15|16)
			geceEki="'ü" ;;
		09|10|21|22)
			geceEki="'u" ;;
	esac
	echo "$geceEki"
}

# Saat bişey'e bişey var larda ki sayılara gelecek ekleri hesaplayan fonksiyon
# Parametre olarak saat alır çünkü kala' larda saat bir artar
function kalaEkiniHesapla {
	case "$1" in
		01|03|04|05|08|11|13|15|16|17|20|23)
			kalaEki="'e" ;;
		02|07|12|14|19|00)
			kalaEki="'ye" ;;
		06|18)
			kalaEki="'ya" ;;
		09|10|21|22)
			kalaEki="'a" ;;
	esac
	echo "$kalaEki"
}

# Saati Yaklaşık Olarak Hesaplayan Fonksiyon
function yaklasikSaat {
	saaty=$saat
	if [[ "$dakika" -ge 00 && "$dakika" -le 03 ]] ; then
		onek="Tam"
	elif [[ "$dakika" -ge 04 && "$dakika" -le 26 ]] ; then
		ek=$(geceEkiniHesapla $saaty)
	elif [[ "$dakika" -ge 27 && "$dakika" -le 33 ]] ; then
		ek=" Buçuk"
	elif [[ "$dakika" -ge 34 && "$dakika" -le 56 ]] ; then
		saaty=$[$saaty + 1]
		#burada sıkıntı var çünkü saate 1 ekleyince önündeki sıfır kayboluyor
		case $saaty in
			1|2|3|4|5|6|7|8|9)
				saaty="0$saaty" ;;
			24)
				saaty=00 ;;
		esac
		ek="$(kalaEkiniHesapla $saaty)"
	fi
	
	case "$saaty" in
		01|13)
			saaty="Bir" ;;
		02|14)
			saaty="İki" ;;
		03|15)
			saaty="Üç" ;;
		04|16)
			saaty="Dört" ;;
		05|17)
			saaty="Beş" ;;
		06|18)
			saaty="Altı" ;;
		07|19)
			saaty="Yedi" ;;
		08|20)
			saaty="Sekiz" ;;
		09|21)
			saaty="Dokuz" ;;
		10|22)
			saaty="On" ;;
		11|23)
			saaty="On Bir" ;;
		12|00)
			saaty="On İki" ;;
		*)
			echo "Saat Bozuk" ;;
esac


	
	
	echo "$(gunHesapla) ${onek} ${saaty}${ek}"
}

function normalSaat {
	
	#gunHesapla fonksiyonunu çağır
	gunHesapla
	
	# Saati Yazıya Çeviren Kısım
	case "$saat" in
		01|13)
			saat="Biri" ;;
		02|14)
			saat="İkiyi" ;;
		03|15)
			saat="Üçü" ;;
		04|16)
			saat="Dördü" ;;
		05|17)
			saat="Beşi" ;;
		06|18)
			saat="Altıyı" ;;
		07|19)
			saat="Yediyi" ;;
		08|20)
			saat="Sekizi" ;;
		09|21)
			saat="Dokuzu" ;;
		10|22)
			saat="Onu" ;;
		11|23)
			saat="On Biri" ;;
		12|00)
			saat="On İkiyi" ;;
		*)
			echo "Saat Bozuk" ;;
	esac

	# Dakikanın İlk Hanesini Yazıya Çeviren Kısım
	case "${dakika:0:1}" in
		0)
			dakika1="Sıfır" ;;
		1)
			dakika1="On" ;;
		2)
			dakika1="Yirmi" ;;
		3)
			dakika1="Otuz" ;;
		4)
			dakika1="Kırk" ;;
		5)
			dakika1="Elli" ;;
		*)
			dakika1="" ;;
	esac

	# Dakikanın İkinci Hanesini Yazıya Çeviren Kısım
	case "${dakika:1:1}" in
		1)
			dakika2="Bir" ;;
		2)
			dakika2="İki" ;;
		3)
			dakika2="Üç" ;;
		4)
			dakika2="Dört" ;;
		5)
			dakika2="Beş" ;;
		6)
			dakika2="Altı" ;;
		7)
			dakika2="Yedi" ;;
		8)
			dakika2="Sekiz" ;;
		9)
			dakika2="Dokuz" ;;
		*)
			dakika2="" ;;
	esac

	saat="$gun ${saat} ${dakika1} ${dakika2} geçiyor."

	echo "$saat"
}

# -y parametresi eklenirse saati yaklaşık olarak verir. 
# Bu case programa verilen parametre sayısı üzerinden işlem yapar.
case "$#" in
	1) # Parametre sayısı 1 "bir" ise
		if [ "$1" = "-y" ]
			then
				# parametre "-y" ise
				echo "Yaklaşık Saat"
				yaklasikSaat $dakika $saat
		else
			# parametre "-y" değilse
			echo "Hatalı Parametre"
			exit
		fi
		;;
	0)	# Parametre sayısı 0 "sıfır" ise (Parametre Yoksa)
		echo "Normal Saat"
			normalSaat
		;;
	*)
		echo "Fazla Parametre Girdiniz"
		exit
		;;
esac

